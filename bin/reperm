#!/bin/bash

if [ -n "$*" ]; then
	cd "$*"
	if [ $? -ne 0 ]; then
		echo "file not found: $*" >&2
		exit
	fi
fi


if [ -f /bin/cygpath ]; then
	id | grep -q "Administrators"
	if [ $? -ne 0 ]; then # not found admin in groups!
		echo "none Administrators account. can not change permissions."
		exit
	fi
elif [ `id -u` -ne 0 ]; then # linux none priv user
	sudo $0 $*
	exit
fi

echo 'Changing folder permission...'
find -type d -exec chmod 0755 '{}' \;
echo 'Changing files permissions...'
find -type f -exec chmod 0644 '{}' \;

echo 'Restoring SELinux contexts...'
restorecon . -r
